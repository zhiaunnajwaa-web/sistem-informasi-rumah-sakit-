<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sistem Informasi Rumah Sakit - Data Perawat</title>
  <style>
    /* Reset sederhana */
    *{box-sizing:border-box;font-family:Inter, system-ui, Arial, sans-serif}
    body{margin:0;background:#f4f6f9;color:#111}
    header{background:linear-gradient(90deg,#0ea5a4,#2563eb);color:#fff;padding:20px}
    .container{max-width:1100px;margin:24px auto;padding:16px}
    h1{margin:0;font-size:20px}

    /* Kartu */
    .card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.08);padding:16px}

    /* Toolbar */
    .toolbar{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
    .toolbar input[type="search"], .toolbar select{padding:8px 12px;border-radius:8px;border:1px solid #d1d5db}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:0;background:#2563eb;color:#fff;cursor:pointer}
    .btn.secondary{background:#06b6d4}
    .btn.ghost{background:transparent;color:#2563eb;border:1px solid #c7d2fe}

    /* Table */
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:10px 12px;text-align:left;border-bottom:1px solid #eef2f7}
    th{background:#fafafa}
    tr:hover td{background:#fbfdff}

    /* Responsive */
    @media (max-width:800px){
      table, thead, tbody, th, td, tr{display:block}
      thead{display:none}
      tr{margin-bottom:12px}
      td{padding-left:50% ;position:relative}
      td:before{position:absolute;left:12px;top:10px;font-weight:600;color:#374151}
      td:nth-of-type(1):before{content:"No."}
      td:nth-of-type(2):before{content:"Nama"}
      td:nth-of-type(3):before{content:"NIP"}
      td:nth-of-type(4):before{content:"Golongan"}
      td:nth-of-type(5):before{content:"Poli"}
      td:nth-of-type(6):before{content:"Shift"}
      td:nth-of-type(7):before{content:"Aksi"}
    }

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center}
    .modal{background:#fff;border-radius:10px;max-width:720px;width:100%;padding:18px}
    .form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .form-grid .full{grid-column:1/-1}
    label{display:block;font-size:13px;margin-bottom:6px;color:#374151}
    input,select{width:100%;padding:8px;border-radius:8px;border:1px solid #d1d5db}

    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

    /* small helpers */
    .muted{color:#6b7280;font-size:13px}
    .pill{display:inline-block;padding:6px 8px;border-radius:999px;background:#eef2ff;color:#1e3a8a;font-weight:600}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Sistem Informasi Rumah Sakit — Data Perawat</h1>
      <p class="muted">Berbasis web (HTML / JavaScript) — contoh sederhana untuk dijalankan di VS Code</p>
    </div>
  </header>

  <main class="container">
    <div class="card">
      <div class="toolbar">
        <button class="btn" id="btnAdd">+ Tambah Perawat</button>
        <input type="search" id="search" placeholder="Cari nama, NIP, poli..." />
        <select id="filterUnit">
          <option value="">Semua Unit/Poli</option>
          <option>IGD</option>
          <option>Poli Anak</option>
          <option>Poli Kandungan</option>
          <option>Inap</option>
        </select>
        <div style="margin-left:auto" class="muted">Total: <span id="total">0</span></div>
      </div>

      <table id="tbl">
        <thead>
          <tr>
            <th style="width:48px">No.</th>
            <th>Nama</th>
            <th>NIP</th>
            <th>Golongan</th>
            <th>Unit / Poli</th>
            <th>Shift</th>
            <th style="width:160px">Aksi</th>
          </tr>
        </thead>
        <tbody>
          <!-- rows generated by JS -->
        </tbody>
      </table>

      <p class="muted" style="margin-top:12px">Catatan: data disimpan sementara di browser (localStorage). Untuk produksi, sambungkan ke backend.</p>
    </div>
  </main>

  <!-- Modal Form -->
  <div class="modal-backdrop" id="modal">
    <div class="modal card">
      <h3 id="modalTitle">Tambah Perawat</h3>
      <form id="form">
        <div class="form-grid">
          <div>
            <label for="nama">Nama</label>
            <input id="nama" name="nama" required />
          </div>
          <div>
            <label for="nip">NIP / ID</label>
            <input id="nip" name="nip" required />
          </div>
          <div>
            <label for="gol">Golongan</label>
            <select id="gol" name="gol">
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
            </select>
          </div>
          <div>
            <label for="unit">Unit / Poli</label>
            <select id="unit" name="unit">
              <option>IGD</option>
              <option>Poli Anak</option>
              <option>Poli Kandungan</option>
              <option>Inap</option>
            </select>
          </div>
          <div>
            <label for="shift">Shift</label>
            <select id="shift" name="shift">
              <option>Pagi</option>
              <option>Sore</option>
              <option>Malam</option>
            </select>
          </div>
          <div>
            <label for="telp">Telepon</label>
            <input id="telp" name="telp" />
          </div>
          <div class="full">
            <label for="alamat">Alamat</label>
            <input id="alamat" name="alamat" />
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn ghost" id="btnCancel">Batal</button>
          <button type="submit" class="btn secondary" id="btnSave">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Simple client-side app: CRUD + search + filter using localStorage
    const STORAGE_KEY = 'sirs_perawat_v1'
    let nurses = []
    let editingId = null

    // DOM
    const tbl = document.querySelector('#tbl tbody')
    const totalEl = document.getElementById('total')
    const modal = document.getElementById('modal')
    const form = document.getElementById('form')
    const modalTitle = document.getElementById('modalTitle')
    const searchEl = document.getElementById('search')
    const filterUnit = document.getElementById('filterUnit')

    // initial
    load()
    render()

    // events
    document.getElementById('btnAdd').addEventListener('click', ()=>{
      openModal()
    })
    document.getElementById('btnCancel').addEventListener('click', closeModal)
    modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal() })

    form.addEventListener('submit', (e)=>{
      e.preventDefault()
      const data = Object.fromEntries(new FormData(form).entries())
      if(editingId){
        // update
        const idx = nurses.findIndex(n=>n.id===editingId)
        if(idx>-1){ nurses[idx] = {...nurses[idx], ...data} }
      } else {
        // create
        const id = 'p'+Date.now()
        nurses.push({id,...data, created: new Date().toISOString()})
      }
      save()
      closeModal()
      render()
    })

    searchEl.addEventListener('input', render)
    filterUnit.addEventListener('change', render)

    // functions
    function openModal(data=null){
      form.reset()
      editingId = null
      modalTitle.textContent = data ? 'Edit Perawat' : 'Tambah Perawat'
      if(data){
        editingId = data.id
        form.nama.value = data.nama || ''
        form.nip.value = data.nip || ''
        form.gol.value = data.gol || 'B'
        form.unit.value = data.unit || 'IGD'
        form.shift.value = data.shift || 'Pagi'
        form.telp.value = data.telp || ''
        form.alamat.value = data.alamat || ''
      }
      modal.style.display = 'flex'
    }
    function closeModal(){ modal.style.display = 'none'; editingId = null }

    function render(){
      const q = searchEl.value.trim().toLowerCase()
      const unit = filterUnit.value
      let filtered = nurses.filter(n => {
        const inQ = [n.nama, n.nip, n.unit, n.shift, n.gol].join(' ').toLowerCase().includes(q)
        const inUnit = unit ? n.unit === unit : true
        return inQ && inUnit
      })

      tbl.innerHTML = ''
      filtered.forEach((n, i)=>{
        const tr = document.createElement('tr')
        tr.innerHTML = `
          <td>${i+1}</td>
          <td>${escapeHtml(n.nama||'—')}</td>
          <td>${escapeHtml(n.nip||'—')}</td>
          <td>${escapeHtml(n.gol||'—')}</td>
          <td>${escapeHtml(n.unit||'—')}</td>
          <td>${escapeHtml(n.shift||'—')}</td>
          <td>
            <button class="btn ghost" data-id="${n.id}" data-action="edit">Edit</button>
            <button class="btn" data-id="${n.id}" data-action="del">Hapus</button>
          </td>
        `
        tbl.appendChild(tr)
      })
      totalEl.textContent = filtered.length

      // attach handlers
      tbl.querySelectorAll('button').forEach(b=>{
        b.addEventListener('click', ()=>{
          const id = b.dataset.id
          const action = b.dataset.action
          if(action==='edit'){
            const item = nurses.find(x=>x.id===id)
            openModal(item)
          } else if(action==='del'){
            if(confirm('Hapus data perawat ini?')){
              nurses = nurses.filter(x=>x.id!==id)
              save(); render()
            }
          }
        })
      })
    }

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(nurses)) }
    function load(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY)
        nurses = raw ? JSON.parse(raw) : sampleData()
      }catch(e){ nurses = sampleData() }
    }

    function sampleData(){
      return [
        {id:'p1',nama:'Siti Aminah',nip:'NIP001',gol:'B',unit:'IGD',shift:'Pagi',telp:'081234567890',alamat:'Jl. Merdeka 10'},
        {id:'p2',nama:'Dewi Kusuma',nip:'NIP002',gol:'C',unit:'Poli Anak',shift:'Sore',telp:'081298765432',alamat:'Jl. Melati 5'},
        {id:'p3',nama:'Rina Safitri',nip:'NIP003',gol:'B',unit:'Inap',shift:'Malam',telp:'081377788899',alamat:'Jl. Anggrek 2'}
      ]
    }

    // basic escape to avoid HTML injection in this demo
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, (c)=>({
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'
    }[c])) }
  </script>
</body>
</html>
